(window["webpackJsonpcordial-wp-registration"]=window["webpackJsonpcordial-wp-registration"]||[]).push([[0],{21:function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAPIAAP////////7+/v7+/v////7+/v7+/v7+/iH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="},23:function(e,t,a){e.exports=a(47)},28:function(e,t,a){},29:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),i=a.n(s),c=(a(28),a(2)),o=a(3),l=a(5),u=a(4),m=a(1),d=a(6),p=(a(29),a(9)),h=a.n(p),f=a(10),v=a(7),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={errors:{},first_name:"",last_name:""},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.validate=a.validate.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleInputChange",value:function(e){var t=this,a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;this.setState(Object(v.a)({},r,n),function(){t.props.inputChanged(r,n)})}},{key:"validate",value:function(){var e=this;return new Promise(function(t,a){var n={};e.state.first_name.length<1&&(n.first_name="is-invalid"),e.state.last_name.length<1&&(n.last_name="is-invalid"),Object.keys(n).length>0?e.setState({errors:n},function(){a(!1)}):e.setState({errors:n},function(){t(!0)})})}},{key:"render",value:function(){var e=this.state.errors,t=this.state,a=t.first_name,n=t.last_name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label"},"First name"),r.a.createElement("div",{className:"input-group input-group-merge"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("input",{type:"text",className:"form-control "+e.first_name,id:"input-first-name",placeholder:"John",name:"first_name",value:a,onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"},"Please enter your first name."))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label"},"Last name"),r.a.createElement("div",{className:"input-group input-group-merge"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("input",{type:"text",className:"form-control "+e.last_name,id:"input-last-name",placeholder:"Doe",name:"last_name",value:n,onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"},"Please enter your last name."))))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={errors:{},email:""},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.validate=a.validate.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleInputChange",value:function(e){var t=this,a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;this.setState(Object(v.a)({},r,n),function(){t.props.inputChanged(r,n)})}},{key:"validate",value:function(){var e=this;return new Promise(function(t,a){var n={};null==e.state.email.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&(n.email="is-invalid",a("email")),e.setState({errors:n},function(){return t("email")})})}},{key:"render",value:function(){var e=this.state.errors,t=this.state.email;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label"},"Email address"),r.a.createElement("div",{className:"input-group input-group-merge"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("input",{type:"email",className:"form-control "+e.email,id:"input-email",placeholder:"name@example.com",value:t,name:"email",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"},"Please enter a valid email address.")))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={errors:{},password:"",confirm_password:""},a.show_confirm_password=a.props.confirm_password,void 0!==a.show_confirm_password&&null!==a.show_confirm_password||(a.show_confirm_password=!1),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.validate=a.validate.bind(Object(m.a)(a)),a.renderPassword=a.renderPassword.bind(Object(m.a)(a)),a.renderConfirmPassword=a.renderConfirmPassword.bind(Object(m.a)(a)),a.render=a.render.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleInputChange",value:function(e){var t=this,a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;this.setState(Object(v.a)({},r,n),function(){t.props.inputChanged(r,n)})}},{key:"validate",value:function(){var e=this;return new Promise(function(t,a){var n={};e.state.password.length<6&&(n.password="is-invalid"),!0===e.show_confirm_password&&e.state.password!==e.state.confirm_password&&(n.confirm_password="is-invalid"),Object.keys(n).length>0?e.setState({errors:n},function(){a(!1)}):e.setState({errors:n},function(){t(!0)})})}},{key:"renderPassword",value:function(){var e=this.state.errors,t=this.state.password;return r.a.createElement("div",{className:"form-group mb-4"},r.a.createElement("label",{className:"form-control-label","data-toggle":"tooltip",title:"Passwords must be at least 6 characters in length"},"Password \xa0",r.a.createElement("i",{className:"fas fa-question-circle"})),r.a.createElement("div",{className:"input-group input-group-merge"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{type:"password",className:"form-control "+e.password,id:"input-password",placeholder:"********",value:t,name:"password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"},"Passwords must be at least 6 characters in length.")))}},{key:"renderConfirmPassword",value:function(){var e=this.state.errors,t=this.state.confirm_password;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label"},"Confirm password"),r.a.createElement("div",{className:"input-group input-group-merge"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{type:"password",className:"form-control "+e.confirm_password,id:"input-password-confirm",placeholder:"********",value:t,name:"confirm_password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"},"Passwords must match.")))}},{key:"render",value:function(){var e=this.renderPassword,t=this.renderConfirmPassword;return!0===this.show_confirm_password?r.a.createElement(r.a.Fragment,null,r.a.createElement(e,null),r.a.createElement(t,null)):r.a.createElement(e,null)}}]),t}(n.Component),_={mode:"production",server:"",user_validate_endpoint:"/api/v1/user/validate",user_create_endpoint:"/api/v1/user",client_endpoint:"/api/v1/client"};_.server="https://cordial-api.com",_.server="https://cordial-api.com";var w=_,E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={errors:{},wordpress_url:window.location.host,force_https:!1},a.wp_rest_endpoint="/wp-json/cordial/v1",a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.validate=a.validate.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleInputChange",value:function(e){var t=this,a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;this.setState(Object(v.a)({},r,n),function(){t.props.inputChanged(r,n)})}},{key:"validate",value:function(){var e=this,t=this.state.wordpress_url;"http://"===t.substr(0,7)&&(t=t.substr(7)),"https://"===t.substr(0,8)&&(t=t.substr(8)),"/"===t[t.length-1]&&(t=t.substr(0,t.length-1));var a=t;return this.setState({wordpress_url:a}),new Promise(function(a,n){t=!0===e.state.force_https?"https://"+t:"http://"+t,t+=e.wp_rest_endpoint,"developer"===w.mode&&a(!0),h()(t,{method:"get"}).then(function(t){if(null!==t&&void 0!==t){var r=t.data;null!==r.namespace&&void 0!==r.namespace?e.setState({errors:{}},function(){return a(!0)}):n(!1)}else n(!1)}).catch(function(t){e.setState({errors:{wordpress_url:"is-invalid"}},function(){return n(!1)})})})}},{key:"render",value:function(){var e=this.state.errors,t=this.state,a=t.wordpress_url,n=t.force_https;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label","data-toggle":"tooltip",title:"The URL of your wordpress site.  If wordpress is hosted at the root level, this will just be your domain (e.g. mydomain.com)"},"Wordpress URL \xa0",r.a.createElement("i",{className:"fas fa-question-circle"})),r.a.createElement("div",{className:"input-group input-group-merge"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-server"}))),r.a.createElement("input",{type:"input",className:"form-control "+e.wordpress_url,id:"input-domain",placeholder:"cordial-api.com/wordpress",value:a,name:"wordpress_url",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"},"Could not detect a Wordpress install at this location."))),r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"check-https",checked:n,name:"force_https",onChange:this.handleInputChange}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"check-https","data-toggle":"tooltip","data-html":"true",title:"Using HTTPS is recommended but it requires that you have a <strong><u>valid</u></strong> SSL certificate."},"Force HTTPS communication \xa0",r.a.createElement("i",{className:"fas fa-question-circle"})))))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={errors:{},terms_agree:!1,privacy_agree:!1},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.validate=a.validate.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleInputChange",value:function(e){var t=this,a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.name;this.setState(Object(v.a)({},r,n),function(){t.props.inputChanged(r,n)})}},{key:"validate",value:function(){var e=this;return new Promise(function(t,a){var n={};!1===e.state.terms_agree&&(n.terms_agree="is-invalid"),Object.keys(n).length>0?e.setState({errors:n},function(){a(!1)}):e.setState({errors:n},function(){t(!0)})})}},{key:"render",value:function(){var e=this.state.errors,t=this.state,a=t.terms_agree;t.privacy_agree;return r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input "+e.terms_agree,id:"check-terms",name:"terms_agree",checked:a,onChange:this.handleInputChange}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"check-terms"},"I agree to the ",r.a.createElement("a",{href:"https://cordial-api.com/terms",target:"_blank"},"Cordial API terms, conditions, and privacy policy")),r.a.createElement("div",{className:"invalid-feedback"},"You must accept the terms, conditions, and privacy policy in order to use the Cordial API.")))}}]),t}(n.Component),k=function(){function e(){Object(c.a)(this,e),this.createAccount=this.createAccount.bind(this),this.authenticateUser=this.authenticateUser.bind(this),this.registerClient=this.registerClient.bind(this),this.auth_token="",this.iv=""}return Object(o.a)(e,[{key:"createAccount",value:function(e,t,a,n){return new Promise(function(r,s){var i=w.server+w.user_create_endpoint,c={FirstName:a,LastName:n,EmailAddress:e,Password:t};h()(i,{method:"post",data:c}).then(function(e){null!==e&&void 0!==e&&null!==e.data.userId&&e.data.userId>0?r(e.data):s(!1)}).catch(function(e){void 0!==e.response&&null!==e.response||(e.response={data:"Could not communicate with server"}),s(e.response.data)})})}},{key:"authenticateUser",value:function(e,t){var a=this;return new Promise(function(n,r){var s=w.server+w.user_validate_endpoint;h()(s,{method:"post",data:{EmailAddress:e,Password:t}}).then(function(e){null!==e&&void 0!==e&&null!==e.data.userId&&e.data.userId>0?(a.auth_token=e.headers["auth-token"],a.iv=e.headers["auth-token-iv"],n(e.data)):r(!1)}).catch(function(e){void 0!==e.response&&null!==e.response||(e.response={data:""}),r(e.response.data)})})}},{key:"registerClient",value:function(e,t){var a=this;return new Promise(function(n,r){var s=80;!0===t&&(s=443);var i=w.server+w.client_endpoint,c={Domain:e,UseHttps:t,HttpPort:s};h()(i,{method:"post",data:c,headers:{"auth-token":a.auth_token,"auth-token-iv":a.iv}}).then(function(e){null!==e&&void 0!==e&&null!==e.data.apiKey?n(e.data.apiKey):n(!1)}).catch(function(e){void 0===e.response||null===e.response?e.response={data:"Could not communicate with server"}:""===e.response.data&&(e.response={data:"This domain name is already registered with Cordial."}),r(e.response.data)})})}}]),e}(),C=a(21),j=a.n(C),O=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=""!==this.props.server_error_message?"block":"none",t=this.props.server_feedback.length>0?"block":"none",a=this.props.waiting_on_server,n=!0===a?"visible":"hidden";return r.a.createElement("div",{className:"mt-4"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-11"},r.a.createElement("button",Object(v.a)({disabled:a,type:"button",className:"btn btn-primary btn-block"},"type","submit"),"Receive API key \xa0\xa0",r.a.createElement("img",{src:j.a,style:{visibility:n},alt:"loading",title:"loading"}))),r.a.createElement("div",{className:"col-1",style:{display:n}}),r.a.createElement("div",{className:"text-success",style:{display:t,fontSize:"1.1rem",textAlign:"center"}},r.a.createElement("ul",null,this.props.server_feedback.map(function(e,t){return r.a.createElement("li",{key:t},e)}))),r.a.createElement("div",{className:"invalid-feedback",style:{display:e,fontSize:"1.1rem",textAlign:"center"}},this.props.server_error_message)))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={server_error_message:"",api_key:"",server_feedback:[],is_server_active:!1},a.name_ref=r.a.createRef(),a.email_ref=r.a.createRef(),a.password_ref=r.a.createRef(),a.wp_install_ref=r.a.createRef(),a.terms_ref=r.a.createRef(),a.components={name:function(){return r.a.createElement(g,{inputChanged:a.handleInputChange,ref:a.name_ref})},email:function(){return r.a.createElement(b,{inputChanged:a.handleInputChange,ref:a.email_ref})},password:function(){return r.a.createElement(A,{inputChanged:a.handleInputChange,confirm_password:!0,ref:a.password_ref})},wp_install:function(){return r.a.createElement(E,{inputChanged:a.handleInputChange,ref:a.wp_install_ref})},terms:function(){return r.a.createElement(y,{inputChanged:a.handleInputChange,ref:a.terms_ref})}},a.server=new k,a.goToLogin=a.goToLogin.bind(Object(m.a)(a)),a.submitForm=a.submitForm.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.validateForm=a.validateForm.bind(Object(m.a)(a)),a.updateApiKey=a.updateApiKey.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"updateApiKey",value:function(e){this.props.updateApiKey(e)}},{key:"goToLogin",value:function(){this.props.loginFunction()}},{key:"validateForm",value:function(){var e=this;return new Promise(function(t,a){e.name_ref.current.validate().then(function(){return e.email_ref.current.validate()}).then(function(){return e.password_ref.current.validate()}).then(function(){return e.wp_install_ref.current.validate()}).then(function(){return e.terms_ref.current.validate()}).then(function(){return t(!0)}).catch(function(){return a(!1)})})}},{key:"handleInputChange",value:function(e,t){this.setState(Object(v.a)({},e,t))}},{key:"submitForm",value:function(e){var t=this;e.preventDefault(),this.validateForm().then(function(){t.setState({is_server_active:!0},function(){return new Promise(function(e,t){e(!0)})})}).then(function(){return t.server.createAccount(t.email_ref.current.state.email,t.password_ref.current.state.password,t.name_ref.current.state.first_name,t.name_ref.current.state.last_name)}).then(function(){var e=[].concat(Object(f.a)(t.state.server_feedback),["Account created"]);t.setState({server_feedback:e},function(){return new Promise(function(e,t){e(!0)})})}).then(function(){return t.server.authenticateUser(t.email_ref.current.state.email,t.password_ref.current.state.password)}).then(function(){return t.server.registerClient(t.wp_install_ref.current.state.wordpress_url,t.wp_install_ref.current.state.force_https)}).then(function(){var e=[].concat(Object(f.a)(t.state.server_feedback),["API key registered"]);t.setState({server_feedback:e},function(){return new Promise(function(e,t){e(!0)})})}).then(function(e){t.setState({server_error_message:"API key is registered.  If this window does not automatically close, you may close it now.",errors:{},api_key:e,server_feedback:[],is_server_active:!1},function(){t.updateApiKey(e)})}).catch(function(e){t.setState({server_error_message:e,is_server_active:!1})})}},{key:"render",value:function(){var e=this.components;return r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"container d-flex align-items-center"},r.a.createElement("div",{className:"col py-5"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-8 col-lg-6 text-left"},r.a.createElement("div",null,r.a.createElement("div",{className:"mb-5 text-center"},r.a.createElement("p",{className:"text-muted mb-0"},"Enter your domain information to receive an API key"),r.a.createElement("span",{className:"text-muted"},"Already have a Cordial API account?\xa0"),r.a.createElement("a",{href:"#",onClick:this.goToLogin,className:"font-weight-bold"},"Sign in!")),r.a.createElement("span",{className:"clearfix"}),r.a.createElement("form",{role:"form",className:"needs-validation",noValidate:!0,onSubmit:this.submitForm},Object.keys(e).map(function(t,a){var n=e[t];return r.a.createElement(n,{key:t})}),r.a.createElement(O,{server_error_message:this.state.server_error_message,server_feedback:this.state.server_feedback,waiting_on_server:this.state.is_server_active}))))))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={server_error_message:"",api_key:"",server_feedback:[],is_server_active:!1},a.email_ref=r.a.createRef(),a.password_ref=r.a.createRef(),a.wp_install_ref=r.a.createRef(),a.components={email:function(){return r.a.createElement(b,{inputChanged:a.handleInputChange,ref:a.email_ref})},password:function(){return r.a.createElement(A,{inputChanged:a.handleInputChange,confirm_password:!1,ref:a.password_ref})},wp_install:function(){return r.a.createElement(E,{inputChanged:a.handleInputChange,ref:a.wp_install_ref})}},a.server=new k,a.goToLogin=a.goToLogin.bind(Object(m.a)(a)),a.submitForm=a.submitForm.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.validateForm=a.validateForm.bind(Object(m.a)(a)),a.updateApiKey=a.updateApiKey.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"updateApiKey",value:function(e){this.props.updateApiKey(e)}},{key:"goToLogin",value:function(){this.props.loginFunction()}},{key:"validateForm",value:function(){var e=this;return new Promise(function(t,a){e.email_ref.current.validate().then(function(){return e.password_ref.current.validate()}).then(function(){return e.wp_install_ref.current.validate()}).then(function(){return t(!0)}).catch(function(){return a(!1)})})}},{key:"handleInputChange",value:function(e,t){this.setState(Object(v.a)({},e,t))}},{key:"submitForm",value:function(e){var t=this;e.preventDefault(),this.validateForm().then(function(){t.setState({is_server_active:!0},function(){return new Promise(function(e,t){e(!0)})})}).then(function(){return t.server.authenticateUser(t.email_ref.current.state.email,t.password_ref.current.state.password)}).then(function(){return t.server.registerClient(t.wp_install_ref.current.state.wordpress_url,t.wp_install_ref.current.state.force_https)}).then(function(e){t.setState({server_error_message:"API key is registered.  If this window does not automatically close, you may close it now.",errors:{},api_key:e,is_server_active:!1},function(){t.updateApiKey(e)})}).catch(function(e){t.setState({server_error_message:e,is_server_active:!1})})}},{key:"render",value:function(){this.state.api_key;var e=this.components;this.state.server_error_message;return r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"container d-flex align-items-center"},r.a.createElement("div",{className:"col py-5"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-8 col-lg-6 text-left"},r.a.createElement("div",null,r.a.createElement("div",{className:"mb-5 text-center"},r.a.createElement("p",{className:"text-muted mb-0"},"Enter your credentials and domain information to receive an API key"),r.a.createElement("span",{className:"text-muted"},"Don't have a Cordial API account?\xa0"),r.a.createElement("a",{href:"#",onClick:this.goToLogin,className:"font-weight-bold"},"Register here!")),r.a.createElement("span",{className:"clearfix"}),r.a.createElement("form",{role:"form",className:"needs-validation",noValidate:!0,onSubmit:this.submitForm},Object.keys(e).map(function(t,a){var n=e[t];return r.a.createElement(n,{key:t})}),r.a.createElement(O,{server_error_message:this.state.server_error_message,server_feedback:this.state.server_feedback,waiting_on_server:this.state.is_server_active}))))))))}}]),t}(n.Component),P=a(22),x=a.n(P),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={has_account:!1,api_key:"",context:e.context},a.logIn=a.logIn.bind(Object(m.a)(a)),a.logOut=a.logOut.bind(Object(m.a)(a)),a.updateApiKey=a.updateApiKey.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"updateApiKey",value:function(e){var t=this;this.setState({api_key:e},function(){var e=x()("#api_key");e.length>0&&null!==(e=e[0])&&(e.value=t.state.api_key,window.closeRegistrationWindow())})}},{key:"logIn",value:function(){this.setState({has_account:!0})}},{key:"logOut",value:function(){this.setState({has_account:!1})}},{key:"render",value:function(){return!0===this.state.has_account?r.a.createElement("div",null,"",r.a.createElement(I,{loginFunction:this.logOut,updateApiKey:this.updateApiKey})):r.a.createElement("div",null,"",r.a.createElement(N,{loginFunction:this.logIn,updateApiKey:this.updateApiKey}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(S,null),document.getElementById("CordialRegistration")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.151f5158.chunk.js.map